<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc (version 1.7.0_95) on Wed Apr 06 15:39:45 CEST 2016 -->
<title>StateDirectionsHandler</title>
<meta name="date" content="2016-04-06">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StateDirectionsHandler";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../mastergl/pdp/StateChangeableVibrator.html" title="interface in mastergl.pdp"><span class="strong">Prev Class</span></a></li>
<li><a href="../../mastergl/pdp/StateDirectionsHandlerTest.html" title="class in mastergl.pdp"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mastergl/pdp/StateDirectionsHandler.html" target="_top">Frames</a></li>
<li><a href="StateDirectionsHandler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">mastergl.pdp</div>
<h2 title="Class StateDirectionsHandler" class="title">Class StateDirectionsHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>mastergl.pdp.StateDirectionsHandler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>android.os.Parcelable</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../mastergl/pdp/AwayFromPathState.html" title="class in mastergl.pdp">AwayFromPathState</a>, <a href="../../mastergl/pdp/InitialState.html" title="class in mastergl.pdp">InitialState</a>, <a href="../../mastergl/pdp/LastState.html" title="class in mastergl.pdp">LastState</a>, <a href="../../mastergl/pdp/RoundAboutState.html" title="class in mastergl.pdp">RoundAboutState</a>, <a href="../../mastergl/pdp/StraightState.html" title="class in mastergl.pdp">StraightState</a>, <a href="../../mastergl/pdp/ToLeftState.html" title="class in mastergl.pdp">ToLeftState</a>, <a href="../../mastergl/pdp/ToRightState.html" title="class in mastergl.pdp">ToRightState</a>, <a href="../../mastergl/pdp/WrongDirectionState.html" title="class in mastergl.pdp">WrongDirectionState</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">StateDirectionsHandler</span>
extends java.lang.Object
implements android.os.Parcelable</pre>
<div class="block">Abstract class managing state of the way. It determines in whatAbout methods if the location given in parameters
 is away from the next points, if the user is well on the road, his directions,...</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../mastergl/pdp/InitialState.html" title="class in mastergl.pdp"><code>InitialState</code></a>, 
<a href="../../mastergl/pdp/ToLeftState.html" title="class in mastergl.pdp"><code>ToLeftState</code></a>, 
<a href="../../mastergl/pdp/ToRightState.html" title="class in mastergl.pdp"><code>ToRightState</code></a>, 
<a href="../../mastergl/pdp/RoundAboutState.html" title="class in mastergl.pdp"><code>RoundAboutState</code></a>, 
<a href="../../mastergl/pdp/WrongDirectionState.html" title="class in mastergl.pdp"><code>WrongDirectionState</code></a>, 
<a href="../../mastergl/pdp/AwayFromPathState.html" title="class in mastergl.pdp"><code>AwayFromPathState</code></a>, 
<a href="../../mastergl/pdp/LastState.html" title="class in mastergl.pdp"><code>LastState</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_android.os.Parcelable">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;android.os.Parcelable</h3>
<code>android.os.Parcelable.ClassLoaderCreator&lt;T&gt;, android.os.Parcelable.Creator&lt;T&gt;</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#ACCURACY_ACTION">ACCURACY_ACTION</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#LIMIT_LEFT_ANGLE">LIMIT_LEFT_ANGLE</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#mIndexNextPolyline">mIndexNextPolyline</a></strong></code>
<div class="block">The index in the list of points of polyline pointing the next point to go through.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#mIndexNextStep">mIndexNextStep</a></strong></code>
<div class="block">The index of the next step in json file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected com.google.android.gms.maps.model.LatLng</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#mLastPosition">mLastPosition</a></strong></code>
<div class="block">The last location of the user.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.List&lt;com.google.android.gms.maps.model.LatLng&gt;</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#mPoints">mPoints</a></strong></code>
<div class="block">The list of all points of polyline to go through.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static double</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#NON_ANGLE_VALUE">NON_ANGLE_VALUE</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_android.os.Parcelable">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;android.os.Parcelable</h3>
<code>CONTENTS_FILE_DESCRIPTOR, PARCELABLE_WRITE_RETURN_VALUE</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#StateDirectionsHandler(java.util.List)">StateDirectionsHandler</a></strong>(java.util.List&lt;com.google.android.gms.maps.model.LatLng&gt;&nbsp;pointsToGoThrough)</code>
<div class="block">Constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#StateDirectionsHandler(android.os.Parcel)">StateDirectionsHandler</a></strong>(android.os.Parcel&nbsp;in)</code>
<div class="block">Recreate a State from a parcel.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#describeContents()">describeContents</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../mastergl/pdp/StateDirectionsHandler.html" title="class in mastergl.pdp">StateDirectionsHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#findNextState(mastergl.pdp.JsonParserUtility)">findNextState</a></strong>(<a href="../../mastergl/pdp/JsonParserUtility.html" title="class in mastergl.pdp">JsonParserUtility</a>&nbsp;parser)</code>
<div class="block">Determine, parsing the json stream in the parameter, what is the next move.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#getHeading(com.google.android.gms.maps.model.LatLng)">getHeading</a></strong>(com.google.android.gms.maps.model.LatLng&nbsp;location)</code>
<div class="block">Get the direction of the user, determined by its last location and the current one.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;com.google.android.gms.maps.model.LatLng&gt;</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#getPoints()">getPoints</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.android.gms.maps.model.LatLng</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#getPositionNextPoint()">getPositionNextPoint</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.android.gms.maps.model.LatLng</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#getPositionPreviousPoint()">getPositionPreviousPoint</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#isOnWrongDirections(android.location.Location)">isOnWrongDirections</a></strong>(android.location.Location&nbsp;location)</code>
<div class="block">Determine if the user is in the wrong directions, using the last known position before the one
 given in parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#RoundAboutExit(com.google.android.gms.maps.model.LatLng)">RoundAboutExit</a></strong>(com.google.android.gms.maps.model.LatLng&nbsp;location)</code>
<div class="block">That function look at the point after the one pointed by the indices mIndexNext and find the angle
 between the current location, the next point and the point after, using the law of cosinus.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#updateIndexPolyline(android.location.Location)">updateIndexPolyline</a></strong>(android.location.Location&nbsp;location)</code>
<div class="block">That function determines the position of the user on the polyline, to update the index
 of the next point (basically, the end of the current segment).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#updateLocation(android.location.Location)">updateLocation</a></strong>(android.location.Location&nbsp;location)</code>
<div class="block">Update the last known position, used to determine direction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#whatAbout(mastergl.pdp.StateChangeableVibrator,%20android.location.Location,%20mastergl.pdp.JsonParserUtility)">whatAbout</a></strong>(<a href="../../mastergl/pdp/StateChangeableVibrator.html" title="interface in mastergl.pdp">StateChangeableVibrator</a>&nbsp;parent,
         android.location.Location&nbsp;location,
         <a href="../../mastergl/pdp/JsonParserUtility.html" title="class in mastergl.pdp">JsonParserUtility</a>&nbsp;parser)</code>
<div class="block">Update the state with the new location given in parameters.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mastergl/pdp/StateDirectionsHandler.html#writeToParcel(android.os.Parcel,%20int)">writeToParcel</a></strong>(android.os.Parcel&nbsp;dest,
             int&nbsp;flags)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LIMIT_LEFT_ANGLE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LIMIT_LEFT_ANGLE</h4>
<pre>protected static final&nbsp;int LIMIT_LEFT_ANGLE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mastergl.pdp.StateDirectionsHandler.LIMIT_LEFT_ANGLE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ACCURACY_ACTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ACCURACY_ACTION</h4>
<pre>protected static final&nbsp;int ACCURACY_ACTION</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mastergl.pdp.StateDirectionsHandler.ACCURACY_ACTION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="NON_ANGLE_VALUE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NON_ANGLE_VALUE</h4>
<pre>protected static final&nbsp;double NON_ANGLE_VALUE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mastergl.pdp.StateDirectionsHandler.NON_ANGLE_VALUE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="mPoints">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mPoints</h4>
<pre>protected&nbsp;java.util.List&lt;com.google.android.gms.maps.model.LatLng&gt; mPoints</pre>
<div class="block">The list of all points of polyline to go through.
 Careful, this is NOT the point in the json file.</div>
</li>
</ul>
<a name="mLastPosition">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mLastPosition</h4>
<pre>protected&nbsp;com.google.android.gms.maps.model.LatLng mLastPosition</pre>
<div class="block">The last location of the user. Set to determine if he is in the wrong directions</div>
</li>
</ul>
<a name="mIndexNextPolyline">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mIndexNextPolyline</h4>
<pre>protected&nbsp;int mIndexNextPolyline</pre>
<div class="block">The index in the list of points of polyline pointing the next point to go through.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../mastergl/pdp/StateDirectionsHandler.html#mPoints"><code>mPoints</code></a></dd></dl>
</li>
</ul>
<a name="mIndexNextStep">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>mIndexNextStep</h4>
<pre>protected&nbsp;int mIndexNextStep</pre>
<div class="block">The index of the next step in json file.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="StateDirectionsHandler(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>StateDirectionsHandler</h4>
<pre>public&nbsp;StateDirectionsHandler(@NotNull
                      java.util.List&lt;com.google.android.gms.maps.model.LatLng&gt;&nbsp;pointsToGoThrough)</pre>
<div class="block">Constructor. Set the list of points to go through and initializes the index of the next point to 1.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pointsToGoThrough</code> - the list of points to go through.</dd></dl>
</li>
</ul>
<a name="StateDirectionsHandler(android.os.Parcel)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StateDirectionsHandler</h4>
<pre>public&nbsp;StateDirectionsHandler(android.os.Parcel&nbsp;in)</pre>
<div class="block">Recreate a State from a parcel.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>in</code> - the parcel to create the object.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPositionNextPoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPositionNextPoint</h4>
<pre>public&nbsp;com.google.android.gms.maps.model.LatLng&nbsp;getPositionNextPoint()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the geographic position of the next point to go through.</dd></dl>
</li>
</ul>
<a name="getPoints()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPoints</h4>
<pre>public&nbsp;java.util.List&lt;com.google.android.gms.maps.model.LatLng&gt;&nbsp;getPoints()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the list of point where the way passes through.</dd></dl>
</li>
</ul>
<a name="getPositionPreviousPoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPositionPreviousPoint</h4>
<pre>public&nbsp;com.google.android.gms.maps.model.LatLng&nbsp;getPositionPreviousPoint()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the geographic position of the previous point the user passed through.</dd></dl>
</li>
</ul>
<a name="getHeading(com.google.android.gms.maps.model.LatLng)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeading</h4>
<pre>public&nbsp;double&nbsp;getHeading(com.google.android.gms.maps.model.LatLng&nbsp;location)</pre>
<div class="block">Get the direction of the user, determined by its last location and the current one.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - the current location.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a angle in the range [-180,180[</dd></dl>
</li>
</ul>
<a name="updateLocation(android.location.Location)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateLocation</h4>
<pre>protected&nbsp;void&nbsp;updateLocation(android.location.Location&nbsp;location)</pre>
<div class="block">Update the last known position, used to determine direction.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - the new last known position.</dd></dl>
</li>
</ul>
<a name="RoundAboutExit(com.google.android.gms.maps.model.LatLng)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RoundAboutExit</h4>
<pre>protected&nbsp;boolean&nbsp;RoundAboutExit(com.google.android.gms.maps.model.LatLng&nbsp;location)</pre>
<div class="block">That function look at the point after the one pointed by the indices mIndexNext and find the angle
 between the current location, the next point and the point after, using the law of cosinus.
 If that angle is more than 0 and less than 120 degrees, the new state is ToLeftState.
 If that angle is more than 240 and less than 360, the new state is ToRightState.

 \(  angle = \arccos(A^2 + B^2 - C^2 \over 2AB) \)

 Function called when the user is on a roundabout and the app has to determine where
 to turn left to come out.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - the current location</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new state of the app.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../mastergl/pdp/RoundAboutState.html" title="class in mastergl.pdp"><code>RoundAboutState</code></a></dd></dl>
</li>
</ul>
<a name="findNextState(mastergl.pdp.JsonParserUtility)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNextState</h4>
<pre>public&nbsp;<a href="../../mastergl/pdp/StateDirectionsHandler.html" title="class in mastergl.pdp">StateDirectionsHandler</a>&nbsp;findNextState(<a href="../../mastergl/pdp/JsonParserUtility.html" title="class in mastergl.pdp">JsonParserUtility</a>&nbsp;parser)</pre>
<div class="block">Determine, parsing the json stream in the parameter, what is the next move.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parser</code> - the object storing the json stream.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new state to work with.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../mastergl/pdp/StateDirectionsHandler.html" title="class in mastergl.pdp"><code>StateDirectionsHandler</code></a></dd></dl>
</li>
</ul>
<a name="isOnWrongDirections(android.location.Location)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOnWrongDirections</h4>
<pre>protected&nbsp;boolean&nbsp;isOnWrongDirections(android.location.Location&nbsp;location)</pre>
<div class="block">Determine if the user is in the wrong directions, using the last known position before the one
 given in parameter.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - the current location.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the user is in the wrong direction, false if not.</dd></dl>
</li>
</ul>
<a name="updateIndexPolyline(android.location.Location)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateIndexPolyline</h4>
<pre>public&nbsp;void&nbsp;updateIndexPolyline(android.location.Location&nbsp;location)</pre>
<div class="block">That function determines the position of the user on the polyline, to update the index
 of the next point (basically, the end of the current segment). That function must be capable of
 changing index when the user move to another segment of the polyline because the information of current segment
 is necessary to compute location on it, or the heading at the first state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - the current location.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../mastergl/pdp/WayManager.html#getAngleFromNorth(com.google.android.gms.maps.model.LatLng,%20com.google.android.gms.maps.model.LatLng)"><code>WayManager.getAngleFromNorth(LatLng, LatLng)</code></a>, 
<a href="../../mastergl/pdp/WayManager.html#intersectLocationToPath(com.google.maps.android.geometry.Point)"><code>WayManager.intersectLocationToPath(Point)</code></a></dd></dl>
</li>
</ul>
<a name="whatAbout(mastergl.pdp.StateChangeableVibrator, android.location.Location, mastergl.pdp.JsonParserUtility)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>whatAbout</h4>
<pre>public abstract&nbsp;void&nbsp;whatAbout(<a href="../../mastergl/pdp/StateChangeableVibrator.html" title="interface in mastergl.pdp">StateChangeableVibrator</a>&nbsp;parent,
             @NotNull
             android.location.Location&nbsp;location,
             <a href="../../mastergl/pdp/JsonParserUtility.html" title="class in mastergl.pdp">JsonParserUtility</a>&nbsp;parser)</pre>
<div class="block">Update the state with the new location given in parameters.
 Determines the next, the next move, the distance to it, whether the user is on the right path or not,
 his directions and do actions if the next point is reached.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - the new location to work with.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../mastergl/pdp/Server.html" title="class in mastergl.pdp"><code>Server</code></a></dd></dl>
</li>
</ul>
<a name="describeContents()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>describeContents</h4>
<pre>public&nbsp;int&nbsp;describeContents()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>describeContents</code>&nbsp;in interface&nbsp;<code>android.os.Parcelable</code></dd>
</dl>
</li>
</ul>
<a name="writeToParcel(android.os.Parcel, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>writeToParcel</h4>
<pre>public&nbsp;void&nbsp;writeToParcel(android.os.Parcel&nbsp;dest,
                 int&nbsp;flags)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>writeToParcel</code>&nbsp;in interface&nbsp;<code>android.os.Parcelable</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../mastergl/pdp/StateChangeableVibrator.html" title="interface in mastergl.pdp"><span class="strong">Prev Class</span></a></li>
<li><a href="../../mastergl/pdp/StateDirectionsHandlerTest.html" title="class in mastergl.pdp"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mastergl/pdp/StateDirectionsHandler.html" target="_top">Frames</a></li>
<li><a href="StateDirectionsHandler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
